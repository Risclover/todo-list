(()=>{const e=document.getElementById("todo-input"),t=document.getElementById("submit"),n=(document.getElementById("saveIndex"),document.getElementById("todo-list"));let d=[];function o(e){localStorage.setItem("todo",JSON.stringify(d));const t=document.querySelector(`[data-key='${e.id}']`);if(e.deleted)return void t.remove();const o=e.checked?"done":"",c=document.createElement("li");c.setAttribute("data-key",e.id),c.setAttribute("class",`todo-item ${o}`),c.innerHTML=`\n        <input id="${e.id}" type="checkbox" />\n        <label for="${e.id}" class="tick js-tick"></label>\n        <span>${e.text}</span>\n        <button class="delete-todo js-delete-todo">\n        <svg><use href="#delete-icon"></use></svg>\n    `,t?n.replaceChild(c,t):n.append(c)}t.addEventListener("click",(function(t){t.preventDefault();const n=e.value.trim();""!==n&&(function(e){const t={text:e,checked:!1,id:Date.now()};d.push(t),o(t)}(n),e.value="",e.focus())})),n.addEventListener("click",(e=>{e.target.classList.contains("js-tick")&&function(e){const t=d.findIndex((t=>t.id===Number(e)));d[t].checked=!d[t].checked,o(d[t])}(e.target.parentElement.dataset.key),e.target.classList.contains("js-delete-todo")&&function(e){const t=d.findIndex((t=>t.id===Number(e))),n={deleted:!0,...d[t]};d=d.filter((t=>t.id!==Number(e))),o(n)}(e.target.parentElement.dataset.key)})),document.addEventListener("DOMContentLoaded",(()=>{const e=localStorage.getItem("todo");e&&(d=JSON.parse(e),d.forEach((e=>{o(e)})))}))})();